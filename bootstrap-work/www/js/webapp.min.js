window.webapp=function(){var e=function(){console.log("Web Page is Ready"),webapp.handle_php_req.getDatafromPHP({action:"init"},webapp.handle_php_req.webReq_phpUrl).done(function(e){var t,i;console.log(JSON.stringify(e)),$(".UserID #id_list").empty(),$(".UserID #id_list").append('<option value="0">Select a user ID:</option>'),$(".DeviceID #dev_list").empty(),$(".DeviceID #dev_list").append('<option value="0">Select a device ID:</option>');for(t in e.id_list)i='<option value="'+e.id_list[t]+'">'+e.id_list[t]+"</option>",$(".UserID #id_list").append(i);$(".UserID #id_list").append('<option value="all">ALL</option>');for(t in e.dev_list)i='<option value="'+e.dev_list[t]+'">'+e.dev_list[t]+"</option>",$(".DeviceID #dev_list").append(i);$(".DeviceID #dev_list").append('<option value="all">ALL</option>'),showTable(e)}).fail(webapp.handle_php_req.getDataError)},t=function(){$(document).ready(function(){$("body").addClass(webapp.browserDetect.OS).addClass(webapp.browserDetect.browser+"_"+webapp.browserDetect.version);var t=[{parent:"body",url:"templates/header/nav-header.html"},{parent:".web-main-container",url:"templates/main/home.html"},{parent:".web-main-container .query-factor",url:"templates/main/query-form.html"},{parent:"body",url:"templates/footer/footer.html"}];!function i(n){$.ajax({type:"GET",url:t[n].url,dataType:"text"}).done(function(r){$(t[n].parent).append(r),n+1<t.length?i(n+1):e()})}(0)})};return{bodyInit:t}}(),function(e){var t=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],i=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}];e.browserDetect={searchString:function(e){for(var t=0;t<e.length;t++){var i=e[t].string,n=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,i){if(-1!=i.indexOf(e[t].subString))return e[t].identity}else if(n)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},init:function(){this.browser=this.searchString(t)||"unknown_browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknown_version",this.OS=this.searchString(i)||"unknown_OS"}},e.browserDetect.init(),console.log("OS: "+e.browserDetect.OS),console.log("Browser: "+e.browserDetect.browser+" "+e.browserDetect.version)}(window.webapp),function(e){var t,i="php/handleWebRequest.php",n=function(e){e.responseText=e.responseText.replace(/<b>/g,"").replace(/<\/b>/g,"").replace(/<br \/>/g,"\n"),console.log(e.responseText)},r=function(e,i){if(e){console.log("***** Request Data Start *****"),console.log("POST to --> "+i),console.log("===== "+e.action+" =====");for(t in e)console.log(t+": "+e[t]);return console.log("===== "+e.action+" ====="),console.log("***** Request Data End *****"),$.ajax({type:"POST",url:i,data:e,dataType:"JSON"})}};e.handle_php_req={webReq_phpUrl:i,getDatafromPHP:r,getDataError:n}}(window.webapp),function(e,t){var i,n,r=function(e){var t={},i=$(e).serializeArray();return $("#debug_prompt #results").empty(),$.each(i,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||"",$("#debug_prompt #results").append(this.name+":"+this.value+" ")}),t},a=function(e){$(".DisplayData").empty(),$(".DisplayHeader").empty();var t="<table>",i="<table><tr><th>Device SN</th><th>User ID</th><th>Gross Weight</th><th>Tare Weight</th><th>Net Weight</th><th>Height</th><th>BMI</th><th>Date</th><th>Time</th></table>";for(n in e.data)t+="<tr><td>"+e.data[n].Device_SN+"</td><td>"+e.data[n].Patient_ID+"</td><td>"+e.data[n].Gross_Weight+"</td><td>"+e.data[n].Tare_Weight+"</td><td>"+e.data[n].Net_Weight+"</td><td>"+e.data[n].Height+"</td><td>"+e.data[n].BMI+"</td><td>"+e.data[n].mDate+"</td><td>"+e.data[n].mTime+"</td></tr>";t+="</table>",$(".DisplayHeader").append(i),$(".DisplayData").append(t)},o=function(){t.getDatafromPHP({action:"getUserID",userID:$("#SqlQueryForm #id_list").val()},php_url).done().fail(t.getDataError)},s=function(){t.getDatafromPHP({action:"getDevice",deviceSn:$("#SqlQueryForm #dev_list").val()},php_url).done().fail(t.getDataError)},p=function(){i=r("#SqlQueryForm"),i.action="selectDb",getDatafromPHP(i,t.webReq_phpUrl).done(a).fail(t.getDataError)};e.formCtrl={onChangeDeviceId:s,onChangeUserId:o,queryformSubmit:p}}(window.webapp,window.webapp.handle_php_req);